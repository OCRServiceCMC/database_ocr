ALTER TABLE UserActions 
DROP CONSTRAINT CK__UserActio__Actio__0A9D95DB;

ALTER TABLE UserActions Add Constraint CK_UserActions_ActionType check  (ActionType in ('Upload', 'Download', 'Delete', 'ConvertBase64ToPDF', 'ConvertBase64ToImage', 'ConvertImagetoBase64'));

-- Drop the foreign key constraint on PackageID
ALTER TABLE [GPTransactions] DROP CONSTRAINT FK__GPTransac__Packa__662B2B3B;

-- Drop the PackageID column
ALTER TABLE [GPTransactions] DROP COLUMN [PackageID];

alter table GPTransactions
    alter column GPUsed int not null
go

DECLARE @ConstraintName nvarchar(128);

-- Find the name of the default constraint
SELECT @ConstraintName = name
FROM sys.default_constraints
WHERE parent_object_id = OBJECT_ID('Users')
AND col_name(parent_object_id, parent_column_id) = 'CurrentGP';

-- Drop the default constraint if it exists
IF @ConstraintName IS NOT NULL
BEGIN
    EXEC('ALTER TABLE Users DROP CONSTRAINT ' + @ConstraintName);
END

alter table GPTransactions
    alter column GPUsed BIGINT not null
go

DECLARE @ConstraintName nvarchar(128);

-- Find the name of the default constraint
SELECT @ConstraintName = name
FROM sys.default_constraints
WHERE parent_object_id = OBJECT_ID('Users')
AND col_name(parent_object_id, parent_column_id) = 'CurrentGP';

-- Drop the default constraint if it exists
IF @ConstraintName IS NOT NULL
BEGIN
    EXEC('ALTER TABLE Users DROP CONSTRAINT ' + @ConstraintName);
END

alter table Users
    alter column CurrentGP BIGINT not null
go